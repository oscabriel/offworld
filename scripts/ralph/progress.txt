## 2026-01-14 - US-001

- Updated toSkillDirName() to collapse owner==repo
- Updated toMetaDirName() for consistency
- Files changed: packages/sdk/src/analysis/pipeline.ts
- **Learnings:**
  - TypeScript strict: array destructuring from split() needs type assertion `as [string, string]` when checked by includes() guard

---

## 2026-01-14 - US-002

- Installed @ast-grep/lang-c
- Added .c, .h extensions to LANG_MAP
- Added "c" to SupportedLang, PatternLanguage types
- Registered C in initLanguages()
- Added AST patterns for C: function, struct, #include
- Files changed: packages/sdk/src/ast/index.ts, packages/sdk/src/ast/patterns.ts, packages/sdk/package.json
- **Learnings:**
  - When adding PatternLanguage, must update ALL Record<PatternLanguage, ...> (5 total)
  - struct patterns may not match all forms - typedef struct differs from named struct

---

## 2026-01-14 - US-003

- Installed @ast-grep/lang-cpp
- Added .cpp, .cc, .cxx, .hpp, .hxx extensions to LANG_MAP
- Added "cpp" to SupportedLang, PatternLanguage types
- Registered C++ in initLanguages()
- Added AST patterns for C++: class, namespace, inheritance, templates
- Files changed: packages/sdk/src/ast/index.ts, packages/sdk/src/ast/patterns.ts, packages/sdk/package.json
- **Learnings:**
  - namespace detected as class due to pattern structure similarity
  - C++ methods inside classes not detected with current patterns

---

## 2026-01-14 - US-004

- Added Ruby language support (package already installed)
- Added .rb extension to LANG_MAP
- Added "ruby" to SupportedLang, PatternLanguage types
- Registered Ruby in initLanguages()
- Added AST patterns for Ruby: def, class, module, require/require_relative/load
- Files changed: packages/sdk/src/ast/index.ts, packages/sdk/src/ast/patterns.ts
- **Learnings:**
  - Ruby method patterns use `end` keyword (unlike Python which uses indentation)
  - Ruby has both require and require_relative for imports
  - module in Ruby is similar to namespace - grouped with class patterns

---

## 2026-01-14 - US-005

- Installed @ast-grep/lang-php
- Added .php extension to LANG_MAP
- Added "php" to SupportedLang, PatternLanguage types
- Registered PHP in initLanguages()
- Added AST patterns for PHP: function (public/private/protected/static), class, interface, trait, use, require/require_once/include/include_once
- Files changed: packages/sdk/src/ast/index.ts, packages/sdk/src/ast/patterns.ts, packages/sdk/package.json
- **Learnings:**
  - PHP has trait as a class-like construct (similar to Ruby mixins)
  - PHP namespaces use backslash separator: `use Namespace\Class`
  - PHP has 4 include variants: require, require_once, include, include_once

---
